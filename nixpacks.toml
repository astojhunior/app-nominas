providers = ["php", "node"]

# Instala extensiones PHP requeridas por composer
[php]
phpExtensions = ["zip", "gd"]

# Fijar comandos para que el build sea determinista
[phases.build]
cmds = [
	"composer install --no-dev --optimize-autoloader",
	"npm ci --omit=dev",
	"npm run build"
]

[phases.start]
cmd = "php artisan storage:link || true && php artisan migrate --force && php artisan serve --host 0.0.0.0 --port $PORT"
